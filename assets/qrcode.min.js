var QRCode;!function(){function c(a){this.mode=d.MODE_8BIT_BYTE,this.data=a}function d(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function e(a,b){if(void 0==a.length)throw new Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=new Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function f(a,b){this.buffer=[],this.length=0,a&&("number"==typeof a?this.put(a,b||8):this.putString(a))}function g(a,b){this.mode=d.MODE_NUMBER,this.data=a}function h(a,b){this.mode=d.MODE_ALPHA_NUM,this.data=a}function i(a,b){this.buffer=[],this.length=0,this.put(a,b)}function j(){return{L:1,M:0,Q:3,H:2}}var k={};k.stringToBytes=function(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b.push(d):d<2048?(b.push(192|d>>6),b.push(128|63&d)):(d>=55296&&d<57344?(d=65536+((1023&d)<<10)+(1023&a.charCodeAt(++c)),b.push(240|d>>18),b.push(128|63&d>>12),b.push(128|63&d>>6),b.push(128|63&d)):(b.push(224|d>>12),b.push(128|63&d>>6),b.push(128|63&d)))}return b};var l={stringToBytes:k.stringToBytes};c.prototype={getLength:function(){return l.stringToBytes(this.data).length},write:function(a){for(var b=0,c=l.stringToBytes(this.data);b<c.length;b++)a.put(c[b],8)}};d.prototype={addData:function(a,b){b=b||"Byte";var c;if(b instanceof Array)c=a;else switch(b){case"Number":c=new g(a);break;case"AlphaNum":c=new h(a);break;case"Byte":default:c=new c(a)}this.dataList.push(c),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw new Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var a=1;for(;a<40&&d.getRSBlocks(a,this.errorCorrectLevel).length<this.dataList.length;a++);this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,b){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++)this.modules[c][d]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeNumber(a),this.setupTypeInfo(a,b),a||this.mapData(this.createData(this.typeNumber,this.errorCorrectLevel),b)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(a+c<=-1||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)b+d<=-1||this.moduleCount<=b+d||(this.modules[a+c][b+d]=0<=c&&c<=6&&(0==d||6==d)||0<=d&&d<=6&&(0==c||6==c)||2<=c&&c<=4&&2<=d&&d<=4?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=f.getLostPoint(this);(0==c||d<b)&&(b=d,a=c)}return a},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2),null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=d.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var e=a[b],f=a[c];if(null==this.modules[e][f])for(var g=-2;2>=g;g++)for(var h=-2;2>=h;h++)this.modules[e+g][f+h]=(-2==g||2==g||-2==h||2==h||0==g&&0==h)?!0:!1}},setupTypeNumber:function(a){for(var b=d.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var e=!a&&1==(b>>c&1);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=e,this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=e}},setupTypeInfo:function(a,b){for(var c=this.errorCorrectLevel<<3|b,e=d.getBCHTypeInfo(c),f=0;15>f;f++){var g=!a&&1==(e>>f&1);6>f?this.modules[f][8]=g:8==f?this.modules[f+1][8]=g:9==f?this.modules[8][this.moduleCount-1]=g:this.modules[8][this.moduleCount-15+f]=g,6>f?this.modules[8][f]=g:8==f?this.modules[this.moduleCount-1][8]=g:9==f?this.modules[8][this.moduleCount-15]=g:this.modules[this.moduleCount-15+f][8]=g}},mapData:function(a,b){for(var c=0,e=this.moduleCount-1,f=this.moduleCount-1,g=this.moduleCount-1;e>0;e-=2){6==e&&e--;for(var h=0;h<this.moduleCount;h++)for(var i=0;i<2;i++){null==this.modules[f][e-i]&&(c<a.length&&(this.modules[f][e-i]=d.getMask(b,f,e-i)?!((a[c]>>>7&1)==1):(a[c]>>>7&1)==1),c++,c>=8&&a.length>1&&(a=a.slice(1),c=0,0==a.length&&(a=[0])),f+=g);f-=g}}},createData:function(a,b){for(var c=d.getRSBlocks(a,b),e=new f,g=0;g<this.dataList.length;g++){var h=this.dataList[g];e.put(h.mode,4),e.put(h.getLength(),d.getLengthInBits(h.mode,this.typeNumber));h.write(e)}var i=0;for(g=0;g<c.length;g++)i+=c[g].dataCount;for(e.getLengthInBits()>8*i&&console.error("code length overflow. ("+e.getLengthInBits()+">"+8*i+")");e.getLengthInBits()+4<=8*i;)e.put(0,4);for(;0!=e.getLengthInBits()%8;)e.putBit(!1);for(;!(e.getLengthInBits()>=8*i&&0==e.getLengthInBits()%8);)e.put(0,8);return d.createBytes(e,c)}},d.stringToBytes=l.stringToBytes,d.createBytes=function(a,b){for(var c=0,d=0,e=0;e<b.length;e++){var g=b[e].dataCount,h=b[e].totalCount-g;c+=g,d=Math.max(d,g)}for(var i=a.buffer.length< c + 4?0:a.buffer.length- c,j=new Array(b.length),k=0;k<b.length;k++){var l=b[k],m=a.buffer.slice(i,l.totalCount+l.dataCount);j[k]=m}return j},d.MODE_NUMBER=1,d.MODE_ALPHA_NUM=2,d.MODE_8BIT_BYTE=4,d.ErrorCorrectLevel=j(),d.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],d.G15=1335,d.G18=7973,d.G15_MASK=21522,d.getLengthInBits=function(a,b){if(1<=b&&b<10)switch(a){case g.MODE_NUMBER:return 10;case g.MODE_ALPHA_NUM:return 9;case g.MODE_8BIT_BYTE:return 8}return 0},d.getMask=function(a,b,c){switch(a){case 0:return 0==(b+c)%2;case 1:return 0==b%2;case 2:return 0==c%3;case 3:return 0==(b+c)%3;case 4:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case 5:return 0==(b*c%2+b*c%3)%2;case 6:return 0==((b*c%2+b*c%3)%2+b*c%2)%2;case 7:return 0==((b+c)%2+b*c%3)%2}return!1},d.getBCHTypeInfo=function(a){for(var b=a<<10,d=d.G15;d.getBCHDigit(b)-d.getBCHDigit(d)>=0;)b^=d<<d.getBCHDigit(b)-d.getBCHDigit(d);return a<<10|b},d.getBCHTypeNumber=function(a){for(var b=a<<12,d=d.G18;d.getBCHDigit(b)-d.getBCHDigit(d)>=0;)b^=d<<d.getBCHDigit(b)-d.getBCHDigit(d);return a<<12|b},d.getBCHDigit	function(){},d.getRSBlocks=function(a,b){var c=d.RS_BLOCK_TABLE[4*(a-1)+b];if(void 0==c)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);return c},d.LOG_TABLE=new Array(256),d.EXP_TABLE=new Array(256);for(var e=0;e<8;e++)d.EXP_TABLE[e]=1<<e;for(e=8;e<256;e++)d.EXP_TABLE[e]=d.EXP_TABLE[e-4]^d.EXP_TABLE[e-5]^d.EXP_TABLE[e-6]^d.EXP_TABLE[e-8];for(e=0;e<255;e++)d.LOG_TABLE[d.EXP_TABLE[e]]=e;d.glog=function(a){if(0>a)throw new Error("glog("+a+")");return d.LOG_TABLE[a]},d.gexp=function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return d.EXP_TABLE[a]},QRCode=d,QRCODE=d;}();
